"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Table = void 0;
const SystemComponentType_1 = require("../../system/SystemComponentType");
const Constraint_1 = require("./Constraint");
const ForeignKey_1 = require("./ForeignKey");
const RelationalStorage_1 = require("./RelationalStorage");
class Table extends RelationalStorage_1.RelationalStorage {
    constructor(schemaName, tableName, description, tableType) {
        super('Table', schemaName, tableName, description, tableType, SystemComponentType_1.SystemComponentType.storage);
        this._constraints = {};
        this._foreignKeys = {};
    }
    get foreignKeys() {
        return this._foreignKeys;
    }
    get constraints() {
        return this._constraints;
    }
    addChild(child) {
        super.addChild(child);
        this.database.addDescendant(child);
        if (child instanceof ForeignKey_1.ForeignKey)
            this._foreignKeys[child.constantCaseName] = child;
        else if (child instanceof Constraint_1.Constraint)
            this._constraints[child.constantCaseName] = child;
    }
    removeChild(child) {
        this.database.removeDescendant(child);
        if (child instanceof ForeignKey_1.ForeignKey)
            delete this._foreignKeys[child.constantCaseName];
        else if (child instanceof Constraint_1.Constraint)
            delete this._constraints[child.constantCaseName];
        return super.removeChild(child);
    }
}
exports.Table = Table;
